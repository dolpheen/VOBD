<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>



<!-- THREE.js 3D engine -->
<script src="js/three.js"></script>
<script src="js/OrbitControls.js"></script>

<!-- Main Script-->
<script type="text/javascript">
window.addEventListener("load", main, false);

//******************************************************************************
//  Global variables
var renderer, scene, camera;  
var container;
var clearColor = 0x808080;		// Clear color for buffer
var near = 0.1, far = 10000;	// Depth for perspective camera
var FOV = 45;					// Field of view for perspective camera
var screenWidth = 0, screenHeight = 0; // Output window dimension. If 0 then default used

var controls;

function main(){
	
	
	init();
	initSceneObjects();
	animate();
}

/***************************************************************************************
 * 			I N I T  F U N C T I O N
 **************************************************************************************/
function init(){
	
	/***************************** S E T - U P Window **********************************/
	// Window attributes
	screenWidth = (screenWidth == 0 ? window.innerWidth : screenWidth); // Canvas width
	screenHeight = (screenHeight == 0 ? window.innerHeight : screenHeight);	// Canvas height
	
	/* *************************** S E T - U P Renderer ********************************/	
	// Create THREE.js WebGL renderer	
	renderer = new THREE.WebGLRenderer({antialias:true});
	renderer.setSize(screenWidth, screenHeight);

    // must enable shadows on the renderer
    renderer.shadowMapEnabled = true;
    renderer.shadowMapType = THREE.PCFSoftShadowMap;

	// attach div element to variable to contain the renderer
	container = document.getElementById("ThreeJS");
	container.appendChild(renderer.domElement);
	
	scene = new THREE.Scene();
	/****************************** S E T - U P Camera *********************************/
	// camera attributes	
	var aspect = screenWidth / screenHeight;
	camera = new THREE.PerspectiveCamera(FOV, aspect, near, far);
	camera.position.set (0, 0, 500); // Camera position in space XYZ
	camera.lookAt(scene.position);
	scene.add (camera);

    controls = new THREE.OrbitControls(camera, renderer.domElement);
}

/*****************************************************************************************
 * 		Here we add our scene objects (Meshes, Lights, etc)
 *****************************************************************************************/
function initSceneObjects(){
	renderer.setClearColor(clearColor, 1.0);
	renderer.clear();

    var sphere = new THREE.Mesh(new THREE.SphereGeometry(150, 50, 50),
            new THREE.MeshPhongMaterial({
                color: 0x0B0E6E
            }));
    sphere.position.z = 250;
    //sphere.castShadow = true;
    scene.add(sphere);

    var plane2Geometry = new THREE.PlaneGeometry(50, 50, 100, 100);
    var plane2Material = new THREE.MeshPhongMaterial({ color: 0xFF0E6E});
    var plane2Mesh = new THREE.Mesh(plane2Geometry, plane2Material);
    plane2Mesh.castShadow = true;
    plane2Mesh.position.set( 5, 50, -250);
    scene.add(plane2Mesh);

    var planeGeometry = new THREE.PlaneGeometry(500, 500, 100, 100);
    var planeMaterial = new THREE.MeshPhongMaterial({ color: 0x0B0E6E});
    var planeMesh = new THREE.Mesh(planeGeometry, planeMaterial);
    planeMesh.receiveShadow = true;
    planeMesh.position.z = -300;
    planeMesh.receiveShadow = true;
    scene.add(planeMesh);



    // "shadow cameras" show the light source and direction

    // spotlight #1 -- yellow, dark shadow
    /*var spotlight = new THREE.SpotLight(0xafafaf);
    spotlight.position.set(30,100,300);
    spotlight.shadowCameraVisible = true;
    spotlight.shadowDarkness = 0.5;

    spotlight.intensity = 0.5;
    // must enable shadow casting ability for the light
    spotlight.castShadow = true;*/
    //scene.add(spotlight);

    // ************************************
    // LIGHT
    //*************************************
    var light = new THREE.DirectionalLight(0xffffff, 0.7);
    light.position.set(0, 0,300);
    light.castShadow = true;
    light.shadowCameraVisible = true;
    light.shadowDarkness = 0.5;
    scene.add(light);

    var  sLight = new THREE.SpotLight(0xFFF4E5,1);

    sLight.position.set( 0, 0, 150);

    sLight.castShadow = true;

    sLight.shadowMapWidth = 1024;

    sLight.shadowMapHeight = 1024;

    sLight.shadowCameraNear = 300;

    sLight.shadowCameraFar = 600;

    sLight.shadowCameraFov = 45;

    sLight.shadowCameraVisible = true;
    scene.add(sLight);
    //var ambientLight = new THREE.AmbientLight(0x0f0f0f);
    //scene.add(ambientLight);
}

/*****************************************************************************************/
/******************************* A N I M A T E   F U N C T I O N *************************/
/********************************* should be called at 60 fps )) *************************/ 
function animate() 
{
    requestAnimationFrame( animate );
	render();		
	update();
}

/***************************************************************************************/
/******************************* R E N D E R   F U N C T I O N *************************/
/***************************************************************************************/
function render() 
{	
	renderer.render( scene, camera );
}

/****************************** U P D A T E   C O N T E X T ****************************/
function update()
{
    controls.update();
}



</script>

<div id="ThreeJS" style="z-index: 1; position: absolute; left:0px; top:0px"></div>

</body>
</html>